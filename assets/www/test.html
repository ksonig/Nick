<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" charset="utf-8" src="js/cordova.js"></script>
<script type="text/javascript" charset="utf-8" src="js/jquery-latest.js"></script>
<script type="text/javascript" charset="utf-8">

	    var imageGroup = [];
	
		function browseCameraRoll() 
		{
			
			navigator.camera.getPicture( onPhotoLoadSuccess, onFail,
				{
				quality: 50,
				destinationType: Camera.DestinationType.DATA_URL,
				encodingType: Camera.EncodingType.JPEG,
				} );
		}
		 
		function onPhotoLoadSuccess( imageData )
		{
			
			
			imageGroup.push(imageData);
			
			
			
			var url = 'http://192.168.0.109:3000/api/v1/registration.json';
			var params = {  		
							 "user" : {
                                           "email" : "ksonig5@yopmail.com",
                                           "password" : "grepruby001",
                                           "firstname" : "grep",
                                           "phone_number" : "0898989994"
                                         },
                              "book" : {
                                           "publisher" : "abc",
                                           "style" : "abc",
                                           "age" : "22",
                                           "cover" : "xyz",
                                           "isbn" : "12345",
                                           "image" : { "file" : imageGroup[0],
 
                                                         "original_filename":"new_image.jpeg" ,
                                                         "filename" : "new_image.jpeg" },
                                           "promocode" : "452001"
                                         }
                              };
		 
			$.ajax({
				   type: "POST",
				   url: url,
				   data: params,
				   success: function (returndata) 
				   {
					alert( 'back from POST: ' + returndata ); 
					//grayscaleImage.src = "data:image/png;base64," + returndata.GrayscaleVersion
				   }} );
		}
		function onFail(message) {
				 
			  alert('Failed because: ' + message);
			  
			}
	


 </script>
</head>
<body>

<center>
    <span id="capture_button">
    <a href="#" onclick="browseCameraRoll();">
        <img name = "imgDisplay" src="img/capture.png" />
    </a>
    </span>
</center>


</body>
</html>